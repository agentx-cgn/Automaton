<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Api and Shell - Echo</title>
    <script src="../../client-library/index.js"></script>
</head>
<body>
<script>
  /*
  This program demonstrates how to use the echo command, which sends data to RVR and RVR returns
      the same data. Echo can be used to check to see if RVR is connected and awake.
   */
  async function main() {
    let rvrToy = new SpheroRvr.SpheroRvrToy('0.0.0.0', 2010);
    rvrToy.wake();
    // Give RVR time to wake up
    await sleep(1000);

    let result1 = await rvrToy.echo([0, 2, 4, 8, 16, 32, 64, 128, 255], SpheroRvr.SpheroRvrToy.primaryTarget);
    console.log('Ping result (primary target):', result1);
  }

  // This function is used to sleep between calls in order to give RVR commands time to complete
  function sleep(ms) {
    return new Promise(resolve => setTimeout(resolve, ms));
  }

  main();

</script>
</body>
</html>